(function(){var e=function(){function a(r){r.each(function(){function T(e){var t=s.values[0].rows;for(var n=0;n<t.length;n++){if(t[n].val===e){return n}}return 0}function N(e){return b(r.map(function(t){return[g(t),y[t](e[t])]}))}function C(){var e=r.filter(function(e){return!y[e].brush.empty()}),t=e.map(function(e){return y[e].brush.extent()});E.style("stroke",function(n){var r=!e.every(function(e,r){return t[r][0]<=n[e]&&n[e]<=t[r][1]});if(r){return"#000"}return i[T(n[o])%i.length]}).style("stroke-opacity",function(n){var r=!e.every(function(e,r){return t[r][0]<=n[e]&&n[e]<=t[r][1]});if(r){return.05}return.5})}function k(e){a=r.indexOf(e)}function L(e){g.range()[a]=d3.event.x;r.sort(function(e,t){return g(e)-g(t)});x.attr("transform",function(e){return"translate("+g(e)+")"});E.attr("d",N)}function A(e){g.domain(r).rangePoints([0,v]);var t=d3.transition().duration(500);t.selectAll(".trait").attr("transform",function(e){return"translate("+g(e)+")"});t.selectAll(".foreground path").attr("d",N)}var r=[];var s=e.getAnalysisAxisDataByIdx(1);var o=s.values[0].col.val;var u=e.getMeasureValuesGroupDataByIdx(0);for(var a=0;a<u.values.length;a++){r.push(u.values[a].col)}var f=function(){var e=[];var t=-1;for(var n=0;n<u.values.length;n++){var r=u.values[n];for(var i=0;i<r.rows.length;i++){for(var a=0;a<r.rows[i].length;a++){var f;if(r.rows[i][a].val!=null){t++;if(e[t]===undefined){f={};e[t]=f}else{f=e[t]}f[r.col]=r.rows[i][a].val;f[o]=s.values[0].rows[i].val}}}t=-1}return e};var l=f();var c=40,h=40,p=20,d=20,v=t-c-h,m=n-p-d;var g=d3.scale.ordinal().domain(r).rangePoints([0,v]),y={};var b=d3.svg.line(),w=d3.svg.axis().orient("left"),E,S;r.forEach(function(e){y[e]=d3.scale.linear().domain(d3.extent(l,function(t){return+t[e]})).range([m,0]);y[e].brush=d3.svg.brush().y(y[e]).on("brush",C)});S=d3.select(this).append("svg:g").attr("font-family","Tahoma,Arial,Helvetica,sans-serif").attr("font-size","12px").style("margin-top","50px").attr("shape-rendering","crispEdges").attr("transform","translate("+c+","+p+")");var x=S.selectAll("axis").data(r).enter().append("svg:g").attr("class","trait").style("fill","none").style("stroke","#000").attr("transform",function(e){return"translate("+g(e)+")"}).call(d3.behavior.drag().origin(function(e){return{x:g(e)}}).on("dragstart",k).on("drag",L).on("dragend",A));x.append("svg:g").attr("class","brush").each(function(e){d3.select(this).call(y[e].brush)}).selectAll("rect").style("fill","none").style("stroke","#fff").attr("x",-8).attr("width",16);E=S.append("svg:g").attr("class","foreground").selectAll("path").data(l).enter().append("svg:path").attr("d",N).attr("class",function(e){return e[o]}).style("stroke-width",1.5).style("fill","none").style("stroke-opacity",.5).style("stroke",function(e){return i[T(e[o])%i.length]});var x=S.selectAll("axis").data(r).enter().append("svg:g").attr("class","trait").style("fill","none").style("stroke","#000").attr("transform",function(e){return"translate("+g(e)+")"}).call(d3.behavior.drag().origin(function(e){return{x:g(e)}}).on("dragstart",k).on("drag",L).on("dragend",A));x.append("svg:g").attr("class","axis").each(function(e){d3.select(this).call(w.scale(y[e]))}).append("svg:text").attr("text-anchor","middle").attr("y",-9).text(String);});u.initialized();return a}var e,t=undefined,n=undefined,r=Math.floor(Math.random()*1e4),i=d3.scale.category20().range().concat(d3.scale.category20b().range()).concat(d3.scale.category20c().range()),s=["square"],o={};var u=d3.dispatch("initialized");a.width=function(e){if(!arguments.length){return t}t=e;return a};a.height=function(e){if(!arguments.length){return n}n=e;return a};a.data=function(t){if(!arguments.length){return e}e=t;return a};a.getPreferredSize=function(){};a.properties=function(e){if(!arguments.length){return o}o=e;if(e&&e.colorPalette)i=e.colorPalette;return a};a.dispatch=function(e){if(!arguments.length){return u}u=e;return a};a.colorPalette=function(e){if(!arguments.length){return i}i=e;return this};return a};var t={id:"sap.viz.modules.parco.valueaxis1",name:"Primary Values",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,mgIndex:1};var n={id:"sap.viz.modules.parco.dimension",name:"Sample",type:"Dimension",min:1,max:1,acceptMND:false,aaIndex:1};var r={id:"sap.viz.modules.parco.series.color",name:"Category",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:false,aaIndex:2};var i={id:"sap.viz.modules.parco",type:"CHART",name:"parallel coordinates",datastructure:"DATA STRUCTURE DOC",properties:{},events:{},feeds:[t,n,r],css:null,configure:null,fn:e};sap.viz.manifest.module.register(i);var s={id:"viz/ext/pa/pc",name:"Parallel Coordinates Chart",modules:{title:{id:"sap.viz.modules.title",configure:{propertyCategory:"title"}},legend:{id:"sap.viz.modules.legend",data:{aa:[2]},configure:{propertyCategory:"legend"}},main:{id:"sap.viz.modules.xycontainer",modules:{plot:{id:"sap.viz.modules.parco",configure:{propertyCategory:"plotArea"}}}}},dependencies:{attributes:[{targetModule:"legend",target:"colorPalette",sourceModule:"main.plot",source:"colorPalette"}],events:[]}};sap.viz.manifest.viz.register(s)})()