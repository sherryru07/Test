<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>TreeMap</title>
		<script type="text/javascript" src="../../../../libs/d3.v2.js"></script>
		<script type="text/javascript" src="../../../../libs/jquery.js"></script>
		<script type="text/javascript" src="../../../../libs/json2.js"></script>
		<script type="text/javascript" src="../../../../libs/sap.viz.js"></script>
		
	</head>
	<body>
		<div id="chart" style="width: 800px; height: 600px; background-color: #ffffff"></div>		
		<script type='text/javascript'>			
			$(function() {
				var Environment = sap.viz.env;
				var CrosstableDataset = sap.viz.data.CrosstableDataset;
				var vizcore = sap.viz.core;

				Environment.initialize({
					'log' : 'debug'
				});

				var chartOption = {						
                      padding : [ 0, 0, 0, 0 ],
                        title : {
                            text : 'TreeMap Resize Demo',
                            visible : true
                        },

                      plotArea:
                        {
                            colornumber : 10,
                            "startColor":"#00f033", 
                            "endColor":"#0d0000", 
                        },

                      tooltip:{visible:true},
					};
				var ds = new CrosstableDataset();
				ds.setData({
                    'analysisAxis':	[{
                
                    'index' : 1,
                    'data' : [{
                        'type' : 'Dimension',
                        'name' : 'R',
                        'values' : ['A1','A1','A1',"A1", 'A2','A2','A2',"A2",]
                        },{
                        'type' : 'Dimension',
                        'name' : 'R',
                        'values' : ['B1','B1','B2',"B2", 'B1','B1','B2',"B2",]
                        },{
                        'type' : 'Dimension',
                        'name' : 'R',
                        'values' : ['C1','C1','C2',"C2", 'C1','C1','C1',"C2",]
                        },{
                        'type' : 'Dimension',
                        'name' : 'R',
                        'values' : ['R1','R1','R2',"R2", 'R2','R1','R1',"R2",]
                        },{
                        'type' : 'Dimension',
                        'name' : 'R',
                        'values' : ['R1','R1','R2',"R2", 'R2','R1','R1',"R2",]
                        }
                        ]
                    }], 
                  'measureValuesGroup': [{
                        'index': 1,
                        'data': [{
                          'type' : 'Measure',
                      'name' : 'Profit',
                      'values' : [[20,9,7,6,9,9,4,5,]] //[[9,2,2,2,2,1,]] //[[6,6,4,4,2,2,2,2]] //[[6,6,4,3,2,2,1]] //3,4,5
                        }]
                      },{
                        'index': 2,
                        'data': [{
                            'type' : 'Measure',
                      'name' : 'Color',
                      'values' : [[4,9,1,6,3,8,2,5,]]
                      }]
                      }]
                });

				var chart = vizcore.createViz({
					  type : 'viz/treemap',
					  data : ds,
					  container : $('#chart'),
					  options : chartOption
					});
				    chart.on('selectData', function ( evt ) {
				        
				     }, null);


                  var fun = function()
                  {
                      var rh = Math.floor(100 + Math.random()*500);//600
                      var rw = Math.floor(100 + Math.random()*800);//900

                      chart.size({
                        'width' : rw,
                        'height' : rh
                      }); 
                  }

                  setInterval(fun,1500);
			});

		</script>
	
	</body>
</html>