<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>Viz Multi Stacked Bar Chart</title>
		<script type="text/javascript" src="../../../../libs/d3.v2.js"></script>
		<script type="text/javascript" src="../../../../libs/jquery.js"></script>
		<script type="text/javascript" src="../../../../libs/json2.js"></script>
		<script type="text/javascript" src="../../../../libs/sap.viz.js"></script>
				
	</head>
	<body>
		<div id="chart" style="width: 900px; height: 900px; background-color: #ffffff"></div>	
		<script type='text/javascript'>
		$(function() {
		    var Environment = sap.viz.env;
		    var CrosstableDataset = sap.viz.data.CrosstableDataset;
		    var vizcore = sap.viz.core;
		    
		    Environment.initialize({
		        'log': 'debug'
		    });
		    var chartOption = {
		    	plotArea: {
		        //'colorPalette' : ["#D9B5CA", "#AED1DA", "#DFECB2", "#FCDAB0", "#F5BCB4"]
		        },
		        title: {
		            text: 'Sample Multi Stacked Bar Chart Title'
		        }
		    };
		    
		    var ds = new CrosstableDataset();
		    ds.setData({
		           'analysisAxis': [
		             {
		            	 'index': 1,
		            'data': [{
		                    'type': 'Dimension',
		                    'name': 'Country',
		                    'values': ['China', 'China', 'USA', 'USA', 'Canada', 'Canada', 'Spain', 'Spain']
		                }, {
		                    'type': 'Dimension',
		                    'name': 'Year',
		                    'values': ['2001', '2002', '2001', '2002', '2001', '2002', '2001', '2002']
		                }]
		        }, {
		            'index': 2,
		            'data': [{
		                    'type': 'Dimension',
		                    'name': 'Product',
		                    'values': ['Car', 'Car', 'Truck', 'Truck']
		                },{
		                    'type': 'Dimension',
		                    'name': 'Color',
		                    'values': ['Black', 'Red', 'Black', 'Red']
		                }]
		        }], 
		        'measureValuesGroup':[{
		            'index': 1,
		            'data': [{
		                    'type': 'Measure',
		                    'name': 'Profit',
		                    'values': [[6, 2, 3, 2, 1, 3, 8, 7], [5, 2, 5, 6, 2, 3, 3, 8], [6, 2, 3, 2, 1, 3, 8, 7], [5, 2, 5, 6, 2, 3, 3, 8]]
		                },{
		                    'type': 'Measure',
		                    'name': 'Revenue',
		                    'values': [[6, 2, 3, 2, 1, 3, 8, 7], [5, 2, 5, 6, 2, 3, 3, 8], [6, 2, 3, 2, 1, 3, 8, 7], [5, 2, 5, 6, 2, 3, 3, 8]]
		                }]
		        }]});
		  

		    //TODO How to define feeding API?
		    var bar = vizcore.createViz({
		        type: 'viz/multi_stacked_bar',
		        data: ds,
		        container: $('#chart'),
		        options: chartOption
		    });

		});

		</script>
		
	</body>
</html>