<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>Viz Multi Dual Stacked Bar Chart</title>
		<script type="text/javascript" src="../../../../libs/d3.v2.js"></script>
		<script type="text/javascript" src="../../../../libs/jquery.js"></script>
		<script type="text/javascript" src="../../../../libs/json2.js"></script>
		<script type="text/javascript" src="../../../../libs/sap.viz.js"></script>
				
	</head>
	<body>
		<div id="chart" style="width: 900px; height: 900px; background-color: #ffffff"></div>	
		<script type='text/javascript'>
		$(function() {
		    var Environment = sap.viz.env;
		    var CrosstableDataset = sap.viz.data.CrosstableDataset;
		    var vizcore = sap.viz.core;
		    
		    Environment.initialize({
		        'log': 'debug'
		    });
		    var chartOption = {
		    	plotArea: {
		        //'colorPalette' : ["#D9B5CA", "#AED1DA", "#DFECB2", "#FCDAB0", "#F5BCB4"]
		        },
		        title: {
		            text: 'Sample Multi Dual Stacked Bar Chart Title'
		        }
		    };
		    
		    var ds = new CrosstableDataset();
		    ds.setData({
		        'analysisAxis' : [{
	                'index': 1,
	                'data': [{
	                        'type': 'Dimension',
	                        'name': 'Country',
	                        'values': ['China', 'China', 'USA', 'USA', 'Canada', 'Canada', 'Spain', 'Spain']
	                    }, {
	                        'type': 'Dimension',
	                        'name': 'Year',
	                        'values': ['2001', '2002', '2001', '2002', '2001', '2002', '2001', '2002']
	                    }]
	            }, {
	                'index': 2,
	                'data': [{
	                        'type': 'Dimension',
	                        'name': 'Product',
	                        'values': ['Car', 'Car', 'Truck', 'Truck']
	                    },{
	                        'type': 'Dimension',
	                        'name': 'Color',
	                        'values': ['Black', 'Red', 'Black', 'Red']
	                    }]
	            }],
	           'measureValuesGroup' : [{
	                'index': 1,
	                'data': [{
	                        'type': 'Measure',
	                        'name': 'Profit',
	                        'values': [[109, 22, 13, 32, 31, 43, 58, 37], [111, 32, 95, 46, 22, 53, 3, 48], [26, 62, 33, 101, 31, 13, 8, 37], [45, 42, 65, 56, 82, 63, 13, 8]]
	                    },{
	                        'type': 'Measure',
	                        'name': 'Margin',
	                        'values': [[10,20,7,25,2,10,12,30],[15,18,11,25,5,5,13,40],[10,20,7,25,2,10,12,30],[15,18,11,25,5,5,13,40]]
	                    }]
	            },{
	                'index': 2,
	                'data': [{
	                        'type': 'Measure',
	                        'name': 'Revenue',
	                        'values': [[6, 12, 3, 22, 1, 43, 8, 67], [5, 82, 5, 16, 2, 3, 33, 8], [56, 2, 73, 2, 91, 3, 8, 27], [5, 52, 5, 76, 2, 93, 3, 28]]
	                    }]
	            }]});
		  

		    //TODO How to define feeding API?
		    var bar = vizcore.createViz({
		        type: 'viz/multi_dual_stacked_bar',
		        data: ds,
		        container: $('#chart'),
		        options: chartOption
		    });

		});

		</script>
		
	</body>
</html>