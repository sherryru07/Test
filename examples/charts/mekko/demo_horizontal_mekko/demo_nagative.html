<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Viz Stacked Bar Chart</title>
    <script type="text/javascript" src="../../../../libs/d3.v2.js"></script>
    <script type="text/javascript" src="../../../../libs/jquery.js"></script>
    <script type="text/javascript" src="../../../../libs/json2.js"></script>
    <script type="text/javascript" src="../../../../libs/sap.common.globalization.js"></script>
    <script type="text/javascript" src="../../../../libs/sap.viz.js"></script>
        
  </head>
  <body>
    <div id="chart" style="width: 600px; height: 400px; background-color: #ffffff"></div>
    <script type='text/javascript'>
    $(function() {
         Environment = sap.viz.env;
         CrosstableDataset = sap.viz.data.CrosstableDataset;
         vizcore = sap.viz.core;
        
        Environment.initialize({
            'log': 'debug'
        });
        
         chartOption = {
          plotArea: {
            //'colorPallet' : ["#D9B5CA", "#AED1DA", "#DFECB2", "#FCDAB0", "#F5BCB4"]
            },
            title: {
              visible : true,
              text: 'Sample Mekko Chart Title'
            }
        };
        
         ds = new CrosstableDataset();
         ds.setData({"analysisAxis":[{"index":1,"data":[{"name":"COUNTRY","values":["France","France","Germany","Germany","Spain","Spain","USA","USA"]},
                                                        {"name":"YEAR","values":["2006","2007","2006","2007","2006","2007","2006","2007"]}]},
                                     {"index":2,"data":[{"name":"PRODUCT","values":["Car","Truck","Truck"]},
                                                        {"name":"COLOR","values":["Red","Black","Red"]}]}],
                     "measureValuesGroup":[{"index":1,"data":[{"name":"REVENUE1","values":[[-83,0,0,0,0,-32,0,-9],[-76,-27,-76,-65,0,-25,-69,0],[0,-99,-15,-41,-59,-76,-62,-69]]}]},
                                           {"index":2,"data":[{"name":"REVENUE2","values":[[-41,0,0,0,0,-62,0,-95],[-27,-19,-31,-76,0,-33,-56,0],[0,-64,-3,-6,-41,-65,-38,-40]]}]}]});
 
        //TODO How to define feeding API?
        //var bar = new HtmlViz('viz/stacked_bar', $('#chart'), chartOption, ds);
        bar = vizcore.createViz({
            type: 'viz/horizontal_mekko',
            data: ds,
            container: $('#chart'),
            options: chartOption
        });

    });
    
    </script>
  
  </body>
</html>